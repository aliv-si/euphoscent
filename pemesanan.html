<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shop</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="img/favicon.png">
  <style>
    *::-webkit-scrollbar {
      width: 0;
    }

    *::-webkit-scrollbar-track {
      overflow: scroll;
      background: transparent;
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
    }

    body {
      flex: 1;
    }

    main {
      flex: 1;
    }

    .nav-hover {
      border-radius: 50px;
      transition: background-color 0.3s ease;
    }

    .nav-hover:hover {
      background-color: rgba(163, 161, 153, 0.15);
    }

    .btn-next,
    .btn-checkout {
      background-color: #3772ff;
      color: white;
    }

    .btn-next:hover,
    .btn-checkout:hover {
      color: white;
      background-color: #1255f3;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    .btn-back {
      border: 1px solid #ff3737;
      color: #ff3737;
    }

    .btn-back:hover {
      color: white;
      background-color: #ff5252;
    }

    .product-card.muted {
      opacity: 0.5;
      pointer-events: none;
      transition: opacity 0.3s ease-in-out;
    }

    .product-card.muted:hover {
      opacity: 1;
    }

    .social-icon {
    transition: transform 0.3s;
    }

    .social-icon:hover {
    transform: scale(1.3);
    }
  </style>
</head>

<body style="background-color: #f5f5f5;">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light position-sticky top-0 p-3" style="z-index: 1; backdrop-filter: blur(50px); background-color: rgba(245, 244, 240, 0.1);">
      <div class="container-md">
          <a class="navbar-brand fw-bold fs-2" href="construction.html">Euphosc√®nt</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
          <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navMenu">
          <ul class="navbar-nav ms-auto">
              <li class="nav-item nav-hover px-3 mx-1 fs-6"><a class="nav-link" href="index.html">Home</a></li>
              <li class="nav-item nav-hover px-3 mx-1 fs-6"><a class="nav-link" href="tentang.html">About</a></li>
              <li class="nav-item nav-hover px-3 mx-1 fs-6"><a class="nav-link" href="produk.html">Product</a></li>
              <li class="nav-item nav-hover px-3 mx-1 fs-6"><a class="nav-link active fw-bold" href="pemesanan.html">Shop</a></li>
              <li class="nav-item nav-hover px-3 mx-1 fs-6"><a class="nav-link" href="kontak.html">Contact</a></li>
          </ul>
          </div>
      </div>
  </nav>

  <main>
    <div class="section active p-3" id="step1">
      <h1 class="mb-5 fw-bold pt-5 text-center">Order Product</h1>
      <div class="container-sm card mb-3 rounded-4 shadow-sm">
    
        <!-- Product 1 -->
        <div class="card-body product-card border-bottom" style="pointer-events: auto;">
          <div class="row align-items-center" id="product-row">
            <!-- Gambar Produk -->
            <div class="col-auto" style="max-width: 278px;">
              <img src="img/Product1.png" alt="Jouisse" class="img-fluid">
            </div>
    
            <!-- Info Produk -->
            <div class="col">
              <h3 class="mb-2 fw-semibold fs-4">Jouisse</h3>
              <p class="fs-5 mb-2 text-muted">Fruity | 50ml</p>  
            </div>
            
            <div class="col-md-3 text-md-end text-start">
              <p class="fw-bold mb-2 fs-4">Rp 189.000</p>
              <div class="d-grid gap-2 justify-content-md-end my-4">
                
                <!-- Tombol Kuantitas -->
                <div class="d-inline-flex align-items-center border rounded-pill overflow-hidden shadow-sm p-1" style="width: auto; max-width: 132px;">
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="decreaseQty(this)">
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <input type="text" class="form-control text-center border-0 bg-transparent px-2 quantity" value="0" style="width: 30px;" readonly>
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="increaseQty(this)">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Product 2 -->
        <div class="card-body product-card border-bottom" style="pointer-events: auto;">
          <div class="row align-items-center" id="product-row">
            <!-- Gambar Produk -->
            <div class="col-auto" style="max-width: 278px;">
              <img src="img/Product2.png" alt="Jouisse" class="img-fluid">
            </div>
    
            <!-- Info Produk -->
            <div class="col">
              <h3 class="mb-2 fw-semibold fs-4">Savoreux</h3>
              <p class="fs-5 mb-2 text-muted">Woody Gourmand | 100ml</p>  
            </div>
            
            <div class="col-md-3 text-md-end text-start">
              <p class="fw-bold mb-2 fs-4">Rp 329.000</p>
              <div class="d-grid gap-2 justify-content-md-end my-4">
                
                <!-- Tombol Kuantitas -->
                <div class="d-inline-flex align-items-center border rounded-pill overflow-hidden shadow-sm p-1" style="width: auto; max-width: 132px;">
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="decreaseQty(this)">
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <input type="text" class="form-control text-center border-0 bg-transparent px-2 quantity" value="0" style="width: 30px;" readonly>
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="increaseQty(this)">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Product 3 -->
        <div class="card-body product-card border-bottom" style="pointer-events: auto;">
          <div class="row align-items-center" id="product-row">
            <!-- Gambar Produk -->
            <div class="col-auto" style="max-width: 278px;">
              <img src="img/Product3.png" alt="Jouisse" class="img-fluid">
            </div>
    
            <!-- Info Produk -->
            <div class="col">
              <h3 class="mb-2 fw-semibold fs-4">Eau Vide</h3>
              <p class="fs-5 mb-2 text-muted">Clean Musk | 50ml</p>  
            </div>
            
            <div class="col-md-3 text-md-end text-start">
              <p class="fw-bold mb-2 fs-4">Rp 159.000</p>
              <div class="d-grid gap-2 justify-content-md-end my-4">
                
                <!-- Tombol Kuantitas -->
                <div class="d-inline-flex align-items-center border rounded-pill overflow-hidden shadow-sm p-1" style="width: auto; max-width: 132px;">
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="decreaseQty(this)">
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <input type="text" class="form-control text-center border-0 bg-transparent px-2 quantity" value="0" style="width: 30px;" readonly>
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="increaseQty(this)">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Product 4 -->
        <div class="card-body product-card border-bottom" style="pointer-events: auto;">
          <div class="row align-items-center" id="product-row">
            <!-- Gambar Produk -->
            <div class="col-auto" style="max-width: 278px;">
              <img src="img/Product4.png" alt="Jouisse" class="img-fluid">
            </div>
    
            <!-- Info Produk -->
            <div class="col">
              <h3 class="mb-2 fw-semibold fs-4">Azurin</h3>
              <p class="fs-5 mb-2 text-muted">Aquatic | 100ml</p>  
            </div>
            
            <div class="col-md-3 text-md-end text-start">
              <p class="fw-bold mb-2 fs-4">Rp 279.000</p>
              <div class="d-grid gap-2 justify-content-md-end my-4">
                
                <!-- Tombol Kuantitas -->
                <div class="d-inline-flex align-items-center border rounded-pill overflow-hidden shadow-sm p-1" style="width: auto; max-width: 132px;">
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="decreaseQty(this)">
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <input type="text" class="form-control text-center border-0 bg-transparent px-2 quantity" value="0" style="width: 30px;" readonly>
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="increaseQty(this)">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Product 5 -->
        <div class="card-body product-card border-bottom" style="pointer-events: auto;">
          <div class="row align-items-center" id="product-row">
            <!-- Gambar Produk -->
            <div class="col-auto" style="max-width: 278px;">
              <img src="img/Product5.png" alt="Jouisse" class="img-fluid object-fit-cover">
            </div>
    
            <!-- Info Produk -->
            <div class="col">
              <h3 class="mb-2 fw-semibold fs-4">Lilane</h3>
              <p class="fs-5 mb-2 text-muted">Floral | 75ml</p>  
            </div>
            
            <div class="col-md-3 text-md-end text-start">
              <p class="fw-bold mb-2 fs-4">Rp 249.000</p>
              <div class="d-grid gap-2 justify-content-md-end my-4">
                
                <!-- Tombol Kuantitas -->
                <div class="d-inline-flex align-items-center border rounded-pill overflow-hidden shadow-sm p-1" style="width: auto; max-width: 132px;">
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="decreaseQty(this)">
                    <i class="fa-solid fa-minus"></i>
                  </button>
                  <input type="text" class="form-control text-center border-0 bg-transparent px-2 quantity" value="0" style="width: 30px;" readonly>
                  <button class="btn btn-outline-secondary rounded-5 px-3 border-0" onclick="increaseQty(this)">
                    <i class="fa-solid fa-plus"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    
      <div class="container-md text-end my-5">
        <button id="btn-checkout" class="btn btn-dark btn-lg px-4 py-2 rounded-pill shadow" onclick="goToStep2()" disabled>
          Checkout
        </button>
      </div>
    </div>
  
    <div class="section" id="step2">
      <div class="container py-5">
        <div class="card p-4 rounded-4">
          <div class="mb-4 py-3 border-bottom">
            <h3 class="step-title">Personal Information</h3>
          </div>
          <form class="needs-validation" id="form-user" novalidate>
            <div class="mb-3">
              <label for="fullname" class="form-label">Full Name</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-user "></i></span>
                <input type="text" aria-label="First name" class="form-control py-2" placeholder="First Name" id="first-name" required/>
                <input type="text" aria-label="Last name" class="form-control py-2" placeholder="Last Name" id="last-name" required/>
                <div class="invalid-feedback">Please enter your full name.</div>
              </div>
            </div>
            <div class="mb-3">
              <label for="phone" class="form-label">Phone</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-phone"></i></span>
                <input type="tel" class="form-control py-2" id="phone" placeholder="Enter your phone number" id="phone" required>
                <div class="invalid-feedback">Phone number can't be empty.</div>
              </div>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <div class="input-group">
                <span class="input-group-text"><i class="fa-solid fa-envelope"></i></span>
                <input type="email" class="form-control py-2" id="email" placeholder="Enter your email" id="email" required>
                <div class="invalid-feedback">Your email address is required.</div>
              </div>
            </div>
            <div class="mb-3">
            </div>
            <div class="mb-3">
              <label for="address" class="form-label">Address</label>
              <textarea class="form-control py-2" id="address" rows="3" placeholder="Enter your address" id="address" required></textarea>
              <div class="invalid-feedback">We need your address to continue.</div>
            </div>
            <div class="text-end mt-4">
              <button type="button" class="btn btn-back btn-lg px-4 py-2 rounded-pill" onclick="goToStep1()">Back</button>
              <button type="submit" class="btn btn-checkout btn-lg px-3 py-2 rounded-pill shadow">Select Payment</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  
    <div class="section" id="step3">
      <div class="container my-4">
        <div class="row g-4">
          <div class="col-md-8">
            <!-- Alamat Pengiriman -->
            <div class="card mb-3 rounded-4 shadow-sm">
              <div class="card-body">
                <h5 class="card-title border-bottom py-3">Shipping Address</h5>
                <p class="fw-semibold" id="checkout-name"></p>
                <p id="checkout-address"></p>
                <p class="text-muted" id="checkout-phone"></p>
              </div>
            </div>
  
            <!-- Produk Dipesan -->
            <div class="card rounded-4 shadow-sm">
              <div class="card-body">
                <h5 class="card-title border-bottom py-3">Ordered Products</h5>
                <div id="checkout-products"></div>
              </div>
            </div>
          </div>
  
          <!-- Ringkasan Pembayaran -->
          <div class="col-md-4">
            <div class="card rounded-4 shadow-sm">
              <div class="card-body">
                <h5 class="card-title">Payment Summary</h5>
  
                <div class="d-flex justify-content-between mb-2">
                  <span>Subtotal</span>
                  <span id="subtotal-text">Rp 0</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Discount</span>
                  <span id="discount-text">Rp 0</span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Ongkir</span>
                  <span>Rp 0</span>
                </div>
  
                <hr>
  
                <div class="d-flex justify-content-between fw-bold mb-5">
                  <span>Total</span>
                  <span id="total-text">Rp 0</span>
                </div>
  
                <button type="button" class="btn btn-back w-100 mb-2 btn-lg px-4 py-2 rounded-pill" onclick="goToStep2Back()">Back</button>
                <button type="button" class="btn btn-checkout w-100 btn-lg px-4 py-2 rounded-pill shadow" data-bs-toggle="modal" data-bs-target="#orderSuccessModal" onclick="showSuccessModalAndReset()">Checkout</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Popup Page / Modal -->
    <div class="modal fade" id="orderSuccessModal" tabindex="-1" aria-labelledby="orderSuccessLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center p-4 rounded-4 border-0" style="background-color: #fff;">
          <div class="modal-body">
            <div class="mb-3">
              <i class="fa-solid fa-circle-check fa-3x text-success"></i>
            </div>
            <h5 class="fw-bold mb-2" id="orderSuccessLabel">Order Placed Successfully</h5>
            <p class="text-muted mb-0">Thank you for your purchase! Your order has been received and is being processed.</p>
          </div>
        </div>
      </div>
    </div>

  <!-- Footer -->
  <footer class="text-white" style="background: linear-gradient(rgba(0, 0, 0, 1), rgba(54, 47, 28, 1)); cursor: default;">
  <!-- Social media -->
      <section class="p-3">
          <div class="container text-center text-md-start mt-5">
              <div class="row mt-3">
                  <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
                      <h6 class="text-uppercase fw-bold mb-4">
                          <i class="fas fa-gem me-3"></i>Euphosc√®nt
                      </h6>
                      <p>
                          To be the first choice of quality perfume in Indonesia that reflects the personality of each user.
                      </p>
                      <div class="col-fluid mt-5">
                      <a href="https://www.facebook.com/" target="_blank" class="me-4 text-reset" style="text-decoration: none;">
                          <i class="fab fa-facebook-f social-icon"></i>
                      </a>
                      <a href="https://twitter.com/" target="_blank" class="me-4 text-reset" style="text-decoration: none;">
                          <i class="fab fa-twitter social-icon"></i>
                      </a>
                      <a href="https://www.instagram.com/" target="_blank" class="me-4 text-reset" style="text-decoration: none;">
                          <i class="fab fa-instagram social-icon"></i>
                      </a>
                      <a href="https://www.linkedin.com/" target="_blank" class="me-4 text-reset" style="text-decoration: none;">
                          <i class="fab fa-linkedin social-icon"></i>
                      </a>
                      <a href="https://github.com/" target="_blank" class="me-4 text-reset" style="text-decoration: none;">
                          <i class="fab fa-github social-icon"></i>
                      </a>
                  </div>
                  </div>
  
                  
                  <!-- Add -->
                  <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
                      <h6 class="text-uppercase fw-bold mb-4">Contact</h6>
                      <p><i class="fas fa-home me-3"></i>Condongcatur, Kabupaten Sleman, Daerah Istimewa Yogyakarta</p>
                      <p><i class="fas fa-envelope me-3"></i>euphosc√®nt@gmail.com</p>
                      <p><i class="fas fa-phone me-3"></i>+62 274884 201</p>   
                  </div>
              </div>
          </div>
      </section>
  
      <div class="text-center p-4" style="background-color: #000000;">
          <span class="fw-medium">&#169; 2025 Euphosc√®nt</span>
      </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Order Quantity +/-
    function increaseQty(btn) {
      const card = btn.closest('.product-card');
      const input = card.querySelector('.quantity');
      input.value = parseInt(input.value) + 1;
      updateCardState(card);
    }

    function decreaseQty(btn) {
      const card = btn.closest('.product-card');
      const input = card.querySelector('.quantity');
      const newVal = parseInt(input.value) - 1;
      input.value = newVal >= 0 ? newVal : 0;
      updateCardState(card);
    }

    function updateCardState(card) {
      const qty = parseInt(card.querySelector('.quantity').value);
      if (qty === 0) {
        card.classList.add('muted');
      } else {
        card.classList.remove('muted');
      }
    }

    document.querySelectorAll('.product-card').forEach(card => updateCardState(card));

    // Ganti Halaman
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const step3 = document.getElementById('step3');
    const selectedProducts = [];

    document.querySelectorAll('.btn-outline-secondary').forEach(btn => {
      btn.addEventListener('click', updateCheckoutButtonState);
    });

    function goToStep2() {
      selectedProducts.length = 0;
      const cards = document.querySelectorAll('.product-card');

      cards.forEach(card => {
        const name = card.querySelector('h3').textContent.trim();
        const qty = parseInt(card.querySelector('.quantity').value);
        const priceText = card.querySelector('.fw-bold').textContent.trim().replace(/[^\d]/g, '');
        const price = parseInt(priceText);

        if (qty > 0) {
          selectedProducts.push({ name, qty, price });
        }
      });

      if (selectedProducts.length === 0) {
        alert("Pilih minimal 1 produk untuk melanjutkan.");
        return;
      }

      step1.classList.remove('active');
      step2.classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateCheckoutButtonState();
    });

    function updateCheckoutButtonState() {
      const quantities = document.querySelectorAll('.quantity');
      const checkoutButton = document.getElementById('btn-checkout');
      const hasSelected = Array.from(quantities).some(input => parseInt(input.value) > 0);
      checkoutButton.disabled = !hasSelected;
    } 

    function goToStep1() {
      step2.classList.remove('active');
      step1.classList.add('active');
    }

    function goToStep2Back() {
      step3.classList.remove('active');
      step2.classList.add('active');
    }

    document.getElementById('form-user').addEventListener('submit', function (e) {
      e.preventDefault();
      const form = this;

      if (!form.checkValidity()) {
        e.stopPropagation();
        form.classList.add('was-validated');
        return;
      }

      goToStep3();
    });

    function goToStep3() {
      const firstName = document.getElementById('first-name').value.trim();
      const lastName = document.getElementById('last-name').value.trim();
      const name = firstName + " " + lastName;
      const phone = document.getElementById('phone').value.trim();
      const address = document.getElementById('address').value.trim();

      document.getElementById('checkout-name').textContent = name;
      document.getElementById('checkout-phone').textContent = "Phone  : " + phone;
      document.getElementById('checkout-address').textContent = address;

      const container = document.getElementById('checkout-products');
      container.innerHTML = '';
      let subtotal = 0;

      selectedProducts.forEach(prod => {
        const line = document.createElement('div');
        line.className = "d-flex justify-content-between mb-2";
        line.innerHTML = `<div><strong>${prod.name}</strong><br><small>${prod.qty} item</small></div><div>Rp ${(prod.price * prod.qty).toLocaleString("id-ID")}</div>`;
        container.appendChild(line);
        subtotal += prod.price * prod.qty;
      });

      let discount = subtotal >= 1000000 ? subtotal * 0.15 : subtotal * 0.08;
      const total = subtotal - discount;

      document.getElementById('subtotal-text').textContent = 'Rp ' + subtotal.toLocaleString("id-ID");
      document.getElementById('discount-text').textContent = 'Rp ' + discount.toLocaleString("id-ID");
      document.getElementById('total-text').textContent = 'Rp ' + total.toLocaleString("id-ID");

      step2.classList.remove('active');
      step3.classList.add('active');
    }

    document.querySelector('.btn.btn-checkout.w-100.mt-4').addEventListener('click', () => {
      alert('Pesanan berhasil dibuat! Terima kasih telah berbelanja.');
    });

    function showSuccessModalAndReset() {
      const modalEl = document.getElementById('orderSuccessModal');
      const modal = new bootstrap.Modal(modalEl);

      modal.show();

      modalEl.addEventListener('hidden.bs.modal', function handleClose() {
        modalEl.removeEventListener('hidden.bs.modal', handleClose);

        const backdrop = document.querySelector('.modal-backdrop');
        if (backdrop) backdrop.remove();

        document.body.classList.remove('modal-open');
        document.body.style.overflow = 'auto';

        step3.classList.remove('active');
        step1.classList.add('active');

        document.querySelectorAll('.quantity').forEach(input => input.value = 0);
        document.querySelectorAll('.product-card').forEach(card => card.classList.add('muted'));
        updateCheckoutButtonState();

        const form = document.querySelector('form');
        if (form) {
          form.reset();

          form.classList.remove('was-validated');
          form.querySelectorAll('.is-valid, .is-invalid').forEach(el => {
            el.classList.remove('is-valid', 'is-invalid');
          });
        }
      });

      setTimeout(() => {
        modal.hide();
      }, 5000);
    }
  </script>
</body>

</html>